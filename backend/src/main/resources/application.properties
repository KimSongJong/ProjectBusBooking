# ==========================================
# SERVER CONFIGURATION
# ==========================================
server.port=8080
server.servlet.context-path=/api

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# Connect to MySQL Docker container (bus-booking-db) via Docker network
spring.datasource.url=jdbc:mysql://bus-booking-db:3306/bus_booking?useSSL=false&serverTimezone=Asia/Ho_Chi_Minh&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=root_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP Configuration - Optimized for XAMPP MySQL with fast failover
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=5000
spring.datasource.hikari.idle-timeout=60000
spring.datasource.hikari.max-lifetime=120000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=2000
spring.datasource.hikari.initialization-fail-timeout=10000

# ==========================================
# JPA/HIBERNATE CONFIGURATION
# ==========================================
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
logging.level.org.springframework.web=INFO
logging.level.com.busbooking=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ==========================================
# SPRING BOOT DEVTOOLS CONFIGURATION (Docker)
# ==========================================
# Disable restart to prevent loop in Docker with volume mounts
spring.devtools.restart.enabled=false
# Keep LiveReload for frontend changes
spring.devtools.livereload.enabled=true

# ==========================================
# JWT CONFIGURATION
# ==========================================
app.jwt.secret=dGhpc0lzQVZlcnlTZWNyZXRLZXlGb3JKV1RUb2tlbkdlbmVyYXRpb25JbkJ1c0Jvb2tpbmdTeXN0ZW0xMjM0NTY3ODk=
app.jwt.expiration=86400000

# ==========================================
# FILE UPLOAD CONFIGURATION
# ==========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2KB

google.maps.api.key=AIzaSyDqREwt7ParWxOVdKPEFskIqmp002__3fQ

# ==========================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ==========================================
# IMPORTANT: You need to:
# 1. Enable "2-Step Verification" in your Gmail account
# 2. Generate an "App Password" at: https://myaccount.google.com/apppasswords
# 3. Replace YOUR_EMAIL@gmail.com and YOUR_APP_PASSWORD below

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=12345levan@gmail.com
spring.mail.password=mtxgodtqrqqvpjaf
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ==========================================
# CLOUDINARY CONFIGURATION
# ==========================================
cloudinary.cloud-name=dncl2jdhn
cloudinary.api-key=379943491161338
cloudinary.api-secret=nURaL0Ui2AhPTdN0bBZoO_KjS5M

# ==========================================
# CORS CONFIGURATION
# ==========================================
cors.allowed-origins=http://localhost:5173

# ==========================================
# VNPAY PAYMENT GATEWAY CONFIGURATION
# ==========================================
# TMN Code - Terminal/Merchant Code (SANDBOX)
vnpay.tmnCode=8VWGGMPI

# Secret Key - Used for HMAC-SHA256 signature (SANDBOX)
vnpay.secretKey=BNSRMWY0L44Q4YO7MGUFM47OYXLGLZ08

# API URL - VNPay Sandbox Payment Gateway
vnpay.apiUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html

# Return URL - Callback endpoint after payment completion
# ? UPDATED: Point to frontend React app for better UX
vnpay.returnUrl=http://localhost:5173/payment/result

# ==========================================
# NOTES:
# - VNPay credentials above are for TESTING ONLY
# - For production, register at https://vnpay.vn/ to get real credentials
# - Update apiUrl to production endpoint for live payments
# ==========================================

# ==========================================
# MOMO PAYMENT GATEWAY CONFIGURATION
# ==========================================
# Partner Code - Merchant Code (UPDATED 2024 TEST CREDENTIALS)
# Note: These are the latest test credentials from MoMo documentation
momo.partnerCode=MOMOBKUN20180529

# Access Key - Used for signature (UPDATED 2024)
momo.accessKey=klm05TvNBzhg7h7j

# Secret Key - Used for HMAC-SHA256 signature (UPDATED 2024)
momo.secretKey=at67qH6mk8w5Y1nAyMoYKMWACiEi2bsa

# API URL - MoMo Test Payment Gateway
momo.apiUrl=https://test-payment.momo.vn/v2/gateway/api/create

# Return URL - Callback endpoint after payment completion (user redirect)
# ? UPDATED: Point to frontend React app
momo.returnUrl=http://localhost:5173/payment/result

# Notify URL - IPN endpoint for server-to-server notification
momo.notifyUrl=http://localhost:8080/api/payment/momo/ipn

# ==========================================
# NOTES FOR MOMO:
# - MoMo credentials above are for TESTING in SANDBOX environment
# - These are official MoMo test credentials provided in their documentation
# - For production:
#   1. Register at https://business.momo.vn/
#   2. Get real credentials (partnerCode, accessKey, secretKey)
#   3. Update apiUrl to: https://payment.momo.vn/v2/gateway/api/create
#   4. Update returnUrl and notifyUrl to your production URLs
# - Minimum payment amount: 1,000 VND
# - Maximum payment amount: 50,000,000 VND
# ==========================================
